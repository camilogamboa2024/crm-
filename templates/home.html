{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gamboa Rental Cars</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>

  <body class="bg-light">
    <nav class="navbar navbar-expand-lg bg-white shadow-sm fixed-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="/">
          <img src="{% static 'images/logo.png' %}" alt="Logo" height="36" />
          <span class="fw-semibold text-dark">Gamboa Rental</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto gap-lg-3">
            <li class="nav-item"><a class="nav-link" href="#vehiculos">Veh칤culos</a></li>
            <li class="nav-item"><a class="nav-link" href="#beneficios">Beneficios</a></li>
            <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
            <li class="nav-item"><a class="nav-link fw-semibold" href="/buscar/">Reservar</a></li>
            <li class="nav-item"><a class="nav-link" href="/crm/">CRM</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <header class="pt-5">
      <div class="container pt-5">
        <div class="row align-items-center g-4">
          <div class="col-lg-6">
            <span class="badge text-bg-primary mb-3">Reserva r치pida</span>
            <h1 class="display-5 fw-bold">Tu viaje comienza aqu칤</h1>
            <p class="lead text-muted">
              Reserva tu veh칤culo ideal con Gamboa Rental Cars y descubre la libertad de conducir.
            </p>
            <div class="d-flex gap-3 flex-wrap">
              <a class="btn btn-primary btn-lg" href="/buscar/">Ver disponibilidad</a>
              <a class="btn btn-outline-secondary btn-lg" href="#contacto">Hablar con un asesor</a>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <h2 class="h5 fw-semibold mb-3">Cotiza tu reserva</h2>
                <form action="/buscar/" method="get" class="row g-3">
                  <div class="col-12">
                    <label class="form-label">Lugar de entrega</label>
                    <input class="form-control" name="pickup" placeholder="Ej. Panam치" value="Panam치" />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Fecha de inicio</label>
                    <input class="form-control" type="date" name="start_date" id="start-date" />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Fecha de fin</label>
                    <input class="form-control" type="date" name="end_date" id="end-date" />
                  </div>
                  <div class="col-12">
                    <div class="alert alert-info py-2 mb-0 d-none" id="duration-alert"></div>
                  </div>
                  <div class="col-12">
                    <button class="btn btn-primary w-100 btn-lg" type="submit">Buscar veh칤culos</button>
                  </div>
                </form>
                <p class="small text-muted mt-3 mb-0">
                  * Calculamos los d칤as de renta de forma inclusiva (inicio y fin).
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <section id="vehiculos" class="py-5">
      <div class="container">
        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-4">
          <div>
            <h2 class="fw-bold mb-1">Nuestra Flota</h2>
            <p class="text-muted mb-0">Kia Picanto desde $35/d칤a 췅 Kia Sonet 2024 desde $60/d칤a</p>
          </div>
          <a class="btn btn-outline-primary" href="/buscar/">Ver todos</a>
        </div>
        <div class="row g-4">
          {% for car in cars %}
            <div class="col-sm-6 col-lg-3">
              <div class="card h-100 shadow-sm border-0">
                <img src="{% static 'images/car_placeholder.png' %}" class="card-img-top" alt="{{ car.make }} {{ car.model }}" />
                <div class="card-body">
                  <h3 class="h6 fw-semibold">{{ car.make }} {{ car.model }} {{ car.year }}</h3>
                  <p class="text-muted small mb-2">{{ car.color }} 췅 {{ car.license_plate }}</p>
                  <p class="fw-semibold mb-3">${{ car.daily_rate }} <span class="text-muted fw-normal">/ d칤a</span></p>
                  <a
                    class="btn btn-primary w-100"
                    href="/buscar/?pickup=Panam%C3%A1&start_date=&end_date=&car_id={{ car.id }}"
                  >
                    Reservar
                  </a>
                </div>
              </div>
            </div>
          {% empty %}
            <div class="col-12">
              <div class="alert alert-warning">No hay veh칤culos disponibles en este momento.</div>
            </div>
          {% endfor %}
        </div>
      </div>
    </section>

    <section id="beneficios" class="py-5 bg-white">
      <div class="container">
        <h2 class="fw-bold text-center mb-4">쯇or qu칠 elegirnos?</h2>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="border rounded-4 p-4 h-100">
              <h3 class="h6 fw-semibold">Flota moderna</h3>
              <p class="text-muted mb-0">Veh칤culos en excelente estado, listos para tu viaje.</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="border rounded-4 p-4 h-100">
              <h3 class="h6 fw-semibold">Proceso simple</h3>
              <p class="text-muted mb-0">Cotiza, filtra y reserva en pocos pasos.</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="border rounded-4 p-4 h-100">
              <h3 class="h6 fw-semibold">Atenci칩n por WhatsApp</h3>
              <p class="text-muted mb-0">Soporte directo para cerrar tu reserva r치pido.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contacto" class="py-5">
      <div class="container">
        <div class="bg-white rounded-4 shadow-sm p-4 p-md-5">
          <h2 class="fw-bold mb-2">Contacto</h2>
          <p class="text-muted">쯃isto para tu pr칩xima aventura? Escr칤benos.</p>
          <div class="d-flex flex-column flex-sm-row gap-3 mt-3">
            <a class="btn btn-outline-secondary" href="tel:+50762969414">游 62969414</a>
            <a class="btn btn-outline-secondary" href="tel:+50764744304">游 64744304</a>
            <a
              class="btn btn-success"
              href="https://wa.me/50762969414?text=Hola%20quiero%20reservar%20un%20veh%C3%ADculo"
              target="_blank"
              rel="noopener noreferrer"
            >
              WhatsApp
            </a>
          </div>
        </div>
      </div>
    </section>

    <footer class="py-4 text-center text-muted small">
      춸 2025 Gamboa Rental Cars. Todos los derechos reservados.
    </footer>

    <a
      href="https://wa.me/50762969414?text=Hola%20quiero%20reservar%20un%20veh%C3%ADculo"
      target="_blank"
      rel="noopener noreferrer"
      class="btn btn-success shadow position-fixed bottom-0 end-0 m-4"
    >
      쯅ecesitas ayuda?
    </a>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      const startInput = document.getElementById('start-date');
      const endInput = document.getElementById('end-date');
      const alertBox = document.getElementById('duration-alert');

      function daysBetweenInclusive(startValue, endValue) {
        if (!startValue || !endValue) return 0;
        const start = new Date(`${startValue}T00:00:00`);
        const end = new Date(`${endValue}T00:00:00`);
        const diffDays = Math.round((end - start) / (1000 * 60 * 60 * 24));
        return diffDays >= 0 ? diffDays + 1 : 0;
      }

      function updateDuration() {
        const days = daysBetweenInclusive(startInput.value, endInput.value);
        if (days > 0) {
          alertBox.textContent = `Duraci칩n estimada: ${days} d칤a(s).`;
          alertBox.classList.remove('d-none');
        } else {
          alertBox.classList.add('d-none');
        }
      }

      startInput.addEventListener('change', updateDuration);
      endInput.addEventListener('change', updateDuration);
    </script>
  </body>
</html>
